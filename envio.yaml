[project]
name = "guardian-vault-indexing"
version = "0.1.0"

[dependencies]
envio = "^0.2.0"
# Add your contract ABIs here

[contracts]
# GuardianVault contract
guardian_vault = { address = "0x742d35Cc6634C0532925a3b844Bc454e4438f44e", abi = "./abis/GuardianVault.json" }

# ERC-20 tokens commonly used
usdc = { address = "0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238", abi = "./abis/ERC20.json" }
weth = { address = "0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14", abi = "./abis/ERC20.json" }

[networks]
sepolia = { chain_id = 11155111, rpc = "https://sepolia.infura.io/v3/YOUR_INFURA_KEY" }
mainnet = { chain_id = 1, rpc = "https://mainnet.infura.io/v3/YOUR_INFURA_KEY" }

[indexing]
# Track all vault-related events
[[indexing.events]]
contract = "guardian_vault"
event = "Deposit"
handler = "handleDeposit"

[[indexing.events]]
contract = "guardian_vault"
event = "Withdrawal"
handler = "handleWithdrawal"

[[indexing.events]]
contract = "guardian_vault"
event = "BeneficiaryAdded"
handler = "handleBeneficiaryAdded"

[[indexing.events]]
contract = "guardian_vault"
event = "TriggerActivated"
handler = "handleTriggerActivated"

# Track ERC-20 transfers to/from vaults
[[indexing.events]]
contract = "usdc"
event = "Transfer"
handler = "handleERC20Transfer"

[[indexing.events]]
contract = "weth"
event = "Transfer"
handler = "handleERC20Transfer"
